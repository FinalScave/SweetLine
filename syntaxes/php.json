{
  "name": "php",
  "fileExtensions": [".php", ".phtml", ".php3", ".php4", ".php5", ".phps"],
  "variables": {
    "identifier": "[a-zA-Z_\\p{L}][a-zA-Z0-9_\\p{L}]*",
    "variable": "\\$[a-zA-Z_\\p{L}][a-zA-Z0-9_\\p{L}]*",
    "whiteSpace": "[ \\t\\f]",
    "any": "[\\S\\s]",
    "builtinType": "int|float|string|bool|array|object|callable|iterable|void|never|mixed|null|self|parent|static|true|false"
  },
  "states": {
    "default": [
      {
        "pattern": "(<\\?php|<\\?=|<\\?)",
        "styles": [1, "keyword"]
      },
      {
        "pattern": "(\\?>)",
        "styles": [1, "keyword"]
      },
      {
        "pattern": "\\b(namespace)\\b${whiteSpace}+(${identifier}(?:\\\\${identifier})*)",
        "styles": [1, "keyword", 2, "class"]
      },
      {
        "pattern": "\\b(use)\\b${whiteSpace}+(function|const)${whiteSpace}+(${identifier}(?:\\\\${identifier})*)(?:${whiteSpace}+(as)${whiteSpace}+(${identifier}))?",
        "styles": [1, "keyword", 2, "keyword", 3, "class", 4, "keyword", 5, "class"]
      },
      {
        "pattern": "\\b(use)\\b${whiteSpace}+(${identifier}(?:\\\\${identifier})*)(?:${whiteSpace}+(as)${whiteSpace}+(${identifier}))?",
        "styles": [1, "keyword", 2, "class", 3, "keyword", 4, "class"]
      },
      {
        "pattern": "\\b(class|interface|trait|enum)\\b${whiteSpace}+(${identifier})",
        "styles": [1, "keyword", 2, "class"],
        "state": "classHeader"
      },
      {
        "pattern": "\\b(new)\\b${whiteSpace}+(${identifier}(?:\\\\${identifier})*)${whiteSpace}*(\\()",
        "styles": [1, "keyword", 2, "class", 3, "punctuation"]
      },
      {
        "pattern": "\\b(new)\\b${whiteSpace}+(${identifier}(?:\\\\${identifier})*)",
        "styles": [1, "keyword", 2, "class"]
      },
      {
        "pattern": "\\b(instanceof)\\b${whiteSpace}+(${identifier}(?:\\\\${identifier})*)",
        "styles": [1, "keyword", 2, "class"]
      },
      {
        "pattern": "(\\()(${builtinType})(\\))",
        "styles": [1, "punctuation", 2, "keyword", 3, "punctuation"]
      },
      {
        "pattern": "(#\\[)(${identifier}(?:\\\\${identifier})*)",
        "styles": [1, "punctuation", 2, "annotation"],
        "state": "attribute"
      },
      {
        "pattern": "\\b(abstract|final)\\b${whiteSpace}+(class)\\b${whiteSpace}+(${identifier})",
        "styles": [1, "keyword", 2, "keyword", 3, "class"],
        "state": "classHeader"
      },
      {
        "pattern": "\\b(public|protected|private|static|readonly)\\b${whiteSpace}+(${builtinType})${whiteSpace}+(${variable})${whiteSpace}*([;=,)])",
        "styles": [1, "keyword", 2, "keyword", 3, "variable", 4, "punctuation"]
      },
      {
        "pattern": "\\b(public|protected|private|static|readonly)\\b${whiteSpace}+\\??(${identifier}(?:\\\\${identifier})*)${whiteSpace}+(${variable})${whiteSpace}*([;=,)])",
        "styles": [1, "keyword", 2, "class", 3, "variable", 4, "punctuation"]
      },
      {
        "pattern": "\\b(function)\\b${whiteSpace}+(${identifier})${whiteSpace}*(\\()",
        "styles": [1, "keyword", 2, "method", 3, "punctuation"],
        "state": "funcParams"
      },
      {
        "pattern": "\\b(fn)\\b${whiteSpace}*(\\()",
        "styles": [1, "keyword", 2, "punctuation"],
        "state": "funcParams"
      },
      {
        "pattern": "\\b(public|protected|private|abstract|static|final)\\b",
        "styles": [1, "keyword"]
      },
      {
        "pattern": "\\b(if|else|elseif|while|do|for|foreach|as|switch|case|default|break|continue|return|match|throw|try|catch|finally|yield|from|goto)\\b",
        "styles": [1, "keyword"]
      },
      {
        "pattern": "\\b(echo|print|die|exit|include|include_once|require|require_once|list|unset|isset|empty|clone|declare|enddeclare|endif|endwhile|endfor|endforeach|endswitch|fn|global|const|var|readonly)\\b",
        "styles": [1, "keyword"]
      },
      {
        "pattern": "\\b(true|false|null|TRUE|FALSE|NULL)\\b",
        "styles": [1, "builtin"]
      },
      {
        "pattern": "\\b(__CLASS__|__DIR__|__FILE__|__FUNCTION__|__LINE__|__METHOD__|__NAMESPACE__|__TRAIT__)\\b",
        "styles": [1, "builtin"]
      },
      {
        "pattern": "\\b(${builtinType})\\b${whiteSpace}+(${variable})",
        "styles": [1, "keyword", 2, "variable"]
      },
      {
        "pattern": "\\??(${identifier}(?:\\\\${identifier})*)${whiteSpace}+(${variable})",
        "styles": [1, "class", 2, "variable"]
      },
      {
        "pattern": "(${identifier}(?:\\\\${identifier})*)(::)(${identifier})${whiteSpace}*(\\()",
        "styles": [1, "class", 2, "punctuation", 3, "method", 4, "punctuation"]
      },
      {
        "pattern": "(${identifier}(?:\\\\${identifier})*)(::)(\\$?${identifier})",
        "styles": [1, "class", 2, "punctuation", 3, "variable"]
      },
      {
        "pattern": "(${variable})(->)(${identifier})${whiteSpace}*(\\()",
        "styles": [1, "variable", 2, "punctuation", 3, "method", 4, "punctuation"]
      },
      {
        "pattern": "(${variable})(->)(${identifier})",
        "styles": [1, "variable", 2, "punctuation", 3, "property"]
      },
      {
        "pattern": "(${variable})(\\?->)(${identifier})${whiteSpace}*(\\()",
        "styles": [1, "variable", 2, "punctuation", 3, "method", 4, "punctuation"]
      },
      {
        "pattern": "(${variable})(\\?->)(${identifier})",
        "styles": [1, "variable", 2, "punctuation", 3, "property"]
      },
      {
        "pattern": "(${identifier})${whiteSpace}*(\\()",
        "styles": [1, "method", 2, "punctuation"]
      },
      {
        "pattern": "${variable}",
        "style": "variable"
      },
      {
        "pattern": "<<<'${identifier}'",
        "style": "string",
        "state": "nowdoc"
      },
      {
        "pattern": "<<<\"?${identifier}\"?",
        "style": "string",
        "state": "heredoc"
      },
      {
        "pattern": "\"",
        "style": "string",
        "state": "doubleString"
      },
      {
        "pattern": "'(?:[^'\\\\]|\\\\.)*'",
        "style": "string"
      },
      {
        "pattern": "\\b0[xX][0-9a-fA-F_]+\\b",
        "style": "number"
      },
      {
        "pattern": "\\b0[bB][01_]+\\b",
        "style": "number"
      },
      {
        "pattern": "\\b0[oO][0-7_]+\\b",
        "style": "number"
      },
      {
        "pattern": "\\b(?:[0-9][0-9_]*\\.?[0-9_]*(?:[eE][+-]?[0-9_]+)?)\\b",
        "style": "number"
      },
      {
        "pattern": "/\\*",
        "style": "comment",
        "state": "longComment"
      },
      {
        "pattern": "(?://|#(?!\\[))${any}*",
        "style": "comment"
      },
      {
        "pattern": "=>|->|\\?->|\\.\\.\\.|\\?\\?=|\\?\\?|<=>|\\*\\*|<<|>>|<=|>=|===?|!==?|&&|\\|\\||::|[.()\\[\\]?!@%^&|+\\-*/<>=,{};:~\\\\]",
        "style": "punctuation"
      }
    ],
    "classHeader": [
      {
        "pattern": "\\b(extends)\\b${whiteSpace}+(${identifier}(?:\\\\${identifier})*)",
        "styles": [1, "keyword", 2, "class"]
      },
      {
        "pattern": "\\b(implements)\\b",
        "styles": [1, "keyword"]
      },
      {
        "pattern": "(:)${whiteSpace}*\\b(${builtinType})\\b",
        "styles": [1, "punctuation", 2, "keyword"]
      },
      {
        "pattern": "(:)${whiteSpace}*(${identifier}(?:\\\\${identifier})*)",
        "styles": [1, "punctuation", 2, "class"]
      },
      {
        "pattern": "(${identifier}(?:\\\\${identifier})*)",
        "styles": [1, "class"]
      },
      {
        "pattern": ",",
        "style": "punctuation"
      },
      {
        "pattern": "\\(",
        "style": "punctuation",
        "state": "funcParams"
      },
      {
        "pattern": "\\{",
        "style": "punctuation",
        "state": "default"
      },
      {
        "onLineEndState": "classHeader"
      }
    ],
    "funcParams": [
      {
        "pattern": "\\)",
        "style": "punctuation",
        "state": "returnType"
      },
      {
        "pattern": "(#\\[)([^\\]]*)(\\])",
        "styles": [1, "punctuation", 3, "punctuation"],
        "subStates": [2, "attribute"]
      },
      {
        "pattern": "\\b(public|protected|private|readonly|static)\\b",
        "styles": [1, "keyword"]
      },
      {
        "pattern": "(\\?)\\b(${builtinType})\\b${whiteSpace}+(\\.\\.\\.)?(${variable})",
        "styles": [1, "punctuation", 2, "keyword", 3, "punctuation", 4, "variable"]
      },
      {
        "pattern": "\\b(${builtinType})\\b${whiteSpace}+(\\.\\.\\.)?(${variable})",
        "styles": [1, "keyword", 2, "punctuation", 3, "variable"]
      },
      {
        "pattern": "(\\?)(${identifier}(?:\\\\${identifier})*)${whiteSpace}+(\\.\\.\\.)?(${variable})",
        "styles": [1, "punctuation", 2, "class", 3, "punctuation", 4, "variable"]
      },
      {
        "pattern": "(${identifier}(?:\\\\${identifier})*)${whiteSpace}+(\\.\\.\\.)?(${variable})",
        "styles": [1, "class", 2, "punctuation", 3, "variable"]
      },
      {
        "pattern": "(\\.\\.\\.)${whiteSpace}*(${variable})",
        "styles": [1, "punctuation", 2, "variable"]
      },
      {
        "pattern": "(${variable})${whiteSpace}*([=])",
        "styles": [1, "variable", 2, "punctuation"]
      },
      {
        "pattern": "\\b(${builtinType})\\b",
        "styles": [1, "keyword"]
      },
      {
        "pattern": "\\b(true|false|null)\\b",
        "styles": [1, "builtin"]
      },
      {
        "pattern": "\\b(?:[0-9][0-9_]*\\.?[0-9_]*(?:[eE][+-]?[0-9_]+)?)\\b",
        "style": "number"
      },
      {
        "pattern": "\"(?:[^\"\\\\]|\\\\.)*\"",
        "style": "string"
      },
      {
        "pattern": "'(?:[^'\\\\]|\\\\.)*'",
        "style": "string"
      },
      {
        "pattern": "${variable}",
        "style": "variable"
      },
      {
        "pattern": "[,\\[\\]=|&?]",
        "style": "punctuation"
      },
      {
        "onLineEndState": "funcParams"
      }
    ],
    "returnType": [
      {
        "pattern": "(:)${whiteSpace}*\\??(${builtinType})\\b",
        "styles": [1, "punctuation", 2, "keyword"],
        "state": "default"
      },
      {
        "pattern": "(:)${whiteSpace}*\\??(${identifier}(?:\\\\${identifier})*)",
        "styles": [1, "punctuation", 2, "class"],
        "state": "default"
      },
      {
        "pattern": "\\{",
        "style": "punctuation",
        "state": "default"
      },
      {
        "pattern": ";",
        "style": "punctuation",
        "state": "default"
      },
      {
        "pattern": "=>",
        "style": "punctuation",
        "state": "default"
      },
      {
        "onLineEndState": "default"
      }
    ],
    "attribute": [
      {
        "pattern": "\\]",
        "style": "punctuation",
        "state": "default"
      },
      {
        "pattern": "(${identifier}(?:\\\\${identifier})*)${whiteSpace}*(\\()",
        "styles": [1, "annotation", 2, "punctuation"]
      },
      {
        "pattern": "(${identifier})${whiteSpace}*(:)",
        "styles": [1, "variable", 2, "punctuation"]
      },
      {
        "pattern": "\"(?:[^\"\\\\]|\\\\.)*\"",
        "style": "string"
      },
      {
        "pattern": "'(?:[^'\\\\]|\\\\.)*'",
        "style": "string"
      },
      {
        "pattern": "\\b(true|false|null)\\b",
        "styles": [1, "builtin"]
      },
      {
        "pattern": "\\b(?:[0-9][0-9_]*\\.?[0-9_]*(?:[eE][+-]?[0-9_]+)?)\\b",
        "style": "number"
      },
      {
        "pattern": "${identifier}",
        "style": "annotation"
      },
      {
        "pattern": "::|[,()\\[\\]:|]",
        "style": "punctuation"
      },
      {
        "onLineEndState": "attribute"
      }
    ],
    "doubleString": [
      {
        "pattern": "\"",
        "style": "string",
        "state": "default"
      },
      {
        "pattern": "\\{${variable}[^}]*\\}",
        "style": "annotation"
      },
      {
        "pattern": "${variable}(?:->${identifier}|\\[[^\\]]*\\])*",
        "style": "annotation"
      },
      {
        "pattern": "\\\\[nrtvef$\"\\\\]|\\\\[0-7]{1,3}|\\\\x[0-9a-fA-F]{1,2}|\\\\u\\{[0-9a-fA-F]+\\}",
        "style": "annotation"
      },
      {
        "pattern": "${any}",
        "style": "string"
      }
    ],
    "heredoc": [
      {
        "pattern": "^${identifier};?$",
        "style": "string",
        "state": "default"
      },
      {
        "pattern": "\\{${variable}[^}]*\\}",
        "style": "annotation"
      },
      {
        "pattern": "${variable}(?:->${identifier}|\\[[^\\]]*\\])*",
        "style": "annotation"
      },
      {
        "pattern": "\\\\[nrtvef$\"\\\\]",
        "style": "annotation"
      },
      {
        "pattern": "${any}",
        "style": "string"
      }
    ],
    "nowdoc": [
      {
        "pattern": "^${identifier};?$",
        "style": "string",
        "state": "default"
      },
      {
        "pattern": "${any}",
        "style": "string"
      }
    ],
    "longComment": [
      {
        "pattern": "\\*/",
        "style": "comment",
        "state": "default"
      },
      {
        "pattern": "(@param|@return|@throws|@var|@property|@method|@deprecated|@since|@see|@author|@version|@todo|@link|@inheritdoc|@override)\\b",
        "style": "annotation"
      },
      {
        "pattern": "${any}",
        "style": "comment"
      }
    ]
  },
  "blockPairs": [
    {
      "start": "{",
      "end": "}",
      "branches": ["case"]
    }
  ]
}
